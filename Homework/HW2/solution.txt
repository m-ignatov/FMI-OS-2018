Автор: Момчил Игнатов

Следният файл представлява документация и проследява алгоритъма за решаване на проблема по ДР 2 по ОС 2018/2019г., СИ.

В началото се декларират константи с кодове на цветове (червено, оранжево, безцветно). Те ще се използват за маркиране на грешки и предупреждения от скрипта, със съответния цвят.

При създаване на изходната директория (output_dir) се проверява дали тази операция е била успешна, дали има налични права за запис, четене и изпълнение върху нея. Прави се също проверка дали подадените входни файлове съществуват. Съответно, ако някое от тези условия не е изпълнено, скриптът известява потребителя със съобщение за грешка и приключва.

Генерират се променливи константи, които скриптът ще ползва за валидация и генерирането на звуковите/eeg файлове:
- AUDIO_START: начало на звуковия файл, в UNIX време в секунди (съответства на краят на стимул 'beep' в лог файла)
- AUDIO_LENGTH: дължина на звуковия файл в секунди; за целта се използва команда sox
- SAMPLING_RATE, START_RECORDING_TIME, RECORD_LENGTH: взимат се от файл с EEG данни
- DATE: UNIX време в секунди, изчислено от SAMPLING_RATE, START_RECORDING_TIME, EEG_TZ
- FIRST_TICK: номер на първия ред на срещане на таг 'tick' от файл с EEG данни

Прави се проверка за повтарящи се стимули и при наличие на такива, скриптът известява потребителя със съобщение за грешка и приключва.

Ако всички валидации дотук са били успешни, започва обхождане по всеки стимул от лог файла.
Прави се проверка дали началото или краят му излизат извън рамките на входните файлове (EEG и звуков файл) и дали даденият период е по-малък от 0.2 секунди. При нарушение на тези условия, скриптът известява потребителя, че текущият стимул ще бъде пропуснат, и продължава към следващия стимул. За генерирането на звуковите файлове, се използва команда sox.

Източници:
https://stackoverflow.com/questions/4534372/get-length-of-wav-from-sox-output
https://stackoverflow.com/questions/5947742/how-to-change-the-output-color-of-echo-in-linux
https://stackoverflow.com/questions/12562023/trim-audio-files-with-sox-in-milliseconds

